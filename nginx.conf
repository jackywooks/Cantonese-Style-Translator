events {
    worker_connections 1024;
}

http {
    include /etc/nginx/mime.types; # Ensures correct MIME types for serving files

    server {
        listen 80; # Nginx listens on port 80 inside the container
        server_name localhost;

        # Root directory for your static files
        root /usr/share/nginx/html;
        index index.html index.htm; # Define default files to serve

        location / {
            try_files $uri $uri/ /index.html; # Try serving the file, then the directory, then fall back to index.html
            # This is crucial for single-page applications (SPA) like React
            # It ensures that direct access to routes (e.g., /about) resolves to index.html
        }

        # Optional: If your API is on the same domain and you want to proxy it
        # location /api {
        #     proxy_pass http://your-backend-service-url;
        #     proxy_set_header Host $host;
        #     proxy_set_header X-Real-IP $remote_addr;
        # }

        # Optional: Add caching headers for static assets
        location ~* \.(css|js|gif|jpe?g|png)$ {
            expires 1y;
            add_header Cache-Control "public, must-revalidate";
        }
    }
}